<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard · SA Homeschooling</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="../../css/dashboard.css">
    <style>
        /* ─── Admin-specific additions ─────────────────────────── */
        .section-heading {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--ink-2);
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .section-heading i { color: var(--accent); }

        .provider-name-row {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 0.2rem;
        }

        .provider-name-row strong {
            font-weight: 700;
            font-size: 0.95rem;
            color: var(--ink);
        }

        .missing-hint {
            font-size: 0.775rem;
            color: var(--ink-4);
            margin-top: 0.2rem;
        }

        .missing-hint i { color: var(--warning); }

        .promote-btn {
            background: transparent;
            border: 1.5px solid var(--border);
            color: var(--ink-2);
            padding: 0.3rem 0.875rem;
            border-radius: var(--radius-full);
            font-size: 0.78rem;
            font-weight: 600;
            cursor: pointer;
            font-family: var(--font-sans);
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            white-space: nowrap;
        }

        .promote-btn:hover {
            border-color: var(--success);
            color: var(--success);
        }

        .demote-btn {
            background: transparent;
            border: 1.5px solid var(--border);
            color: var(--ink-2);
            padding: 0.3rem 0.875rem;
            border-radius: var(--radius-full);
            font-size: 0.78rem;
            font-weight: 600;
            cursor: pointer;
            font-family: var(--font-sans);
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            white-space: nowrap;
        }

        .demote-btn:hover {
            border-color: var(--danger);
            color: var(--danger);
        }

        .promote-demote-pair {
            display: flex;
            gap: 0.375rem;
        }

        .slot-icon { color: #f59e0b; font-size: 0.85rem; }

        .manual-override-note {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            background: #f0f4ff;
            border: 1px solid #c7d2fe;
            border-radius: var(--radius-md);
            padding: 1rem 1.25rem;
            margin-top: 1.25rem;
            color: #312e81;
            font-size: 0.875rem;
        }

        .manual-override-note i { color: #6366f1; flex-shrink: 0; margin-top: 2px; }

        /* Filled slot styling */
        .slot-filled { font-weight: 600; color: var(--ink); }

        /* Featured slots grid - 4 slots max */
        .featured-slots {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin: 1rem 0;
        }

        @media (max-width: 768px) {
            .featured-slots {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .featured-slots {
                grid-template-columns: 1fr;
            }
        }

        .slot-card {
            background: var(--bg);
            border-radius: var(--radius-md);
            padding: 1.25rem;
            border: 1px solid var(--border);
            transition: var(--transition);
        }

        .slot-card:hover {
            border-color: var(--accent-light);
            box-shadow: var(--shadow-sm);
        }

        .slot-card h4 {
            font-family: var(--font-serif);
            color: var(--ink);
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .slot-card p {
            color: var(--ink-3);
            font-size: 0.8rem;
            margin-bottom: 0.75rem;
        }

        .slot-list {
            list-style: none;
            padding: 0;
        }

        .slot-list li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border-light);
            font-size: 0.85rem;
            gap: 0.5rem;
        }

        .slot-list li:last-child {
            border-bottom: none;
        }

        .slot-list button {
            font-size: 0.72rem;
            padding: 0.2rem 0.6rem;
            border-radius: var(--radius-full);
            border: 1px solid var(--border);
            background: white;
            color: var(--ink-3);
            cursor: pointer;
            font-family: var(--font-sans);
            transition: var(--transition);
            white-space: nowrap;
        }

        .slot-list button:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        /* Timer styling */
        .slot-timer {
            font-size: 0.7rem;
            color: var(--ink-4);
            margin-top: 0.2rem;
            display: flex;
            align-items: center;
            gap: 0.2rem;
        }

        .slot-timer i {
            font-size: 0.6rem;
        }

        .timer-badge {
            background: #e6f7e6;
            color: #0f7b3a;
            padding: 0.1rem 0.4rem;
            border-radius: 3px;
            font-size: 0.65rem;
            font-weight: 600;
        }
    </style>
</head>
<body>

    <!-- ─── Header (only Home link) ────────────────────────────── -->
    <header class="top-header">
        <div class="logo-area">
            <div class="trusted-text" style="border-left: none; padding-left: 0;">
                Trusted Homeschooling Directory
                <span>SA Homeschooling</span>
            </div>
        </div>

        <!-- Desktop nav - only Home link -->
        <nav class="nav-links" aria-label="Main navigation">
            <a href="../homePage.html">Home</a>
        </nav>

        <!-- Mobile hamburger -->
        <button class="hamburger" id="hamburgerBtn" aria-label="Toggle navigation" aria-expanded="false">
            <span></span><span></span><span></span>
        </button>
    </header>

    <!-- Mobile nav - only Home link -->
    <nav class="mobile-nav" id="mobileNav" aria-label="Mobile navigation">
        <a href="../homePage.html">Home</a>
    </nav>

    <!-- ─── Main Content ───────────────────────────────────────── -->
    <main class="dash-wrapper">
        <div class="page-headline">
            <h1>Admin Control Panel</h1>
            <p>Manage listings, approvals, featured slots, provider badges, and moderate reviews</p>
        </div>

        <div class="card">
            <!-- Card header -->
            <div class="card-header">
                <i class="fas fa-shield-halved" aria-hidden="true"></i>
                <h2>Directory Oversight</h2>
                <span class="badge"><i class="fas fa-lock" aria-hidden="true"></i> admin</span>
            </div>

            <!-- Statistics summary -->
            <div class="admin-stats" role="region" aria-label="Dashboard statistics">
                <div class="stat-box">
                    <h3>28</h3>
                    <p>total providers</p>
                </div>
                <div class="stat-box">
                    <h3>8</h3>
                    <p>pending approval</p>
                </div>
                <div class="stat-box">
                    <h3>4</h3>
                    <p>featured slots</p>
                </div>
                <div class="stat-box">
                    <h3>12</h3>
                    <p>reviews pending</p>
                </div>
            </div>

            <!-- Admin tabs (Category Mgmt removed) -->
            <div class="admin-tabs" role="tablist" aria-label="Admin sections">
                <button class="tab-btn active" role="tab" aria-selected="true" aria-controls="pending-tab" onclick="switchTab('pending', this)">
                    <i class="fas fa-hourglass-half" aria-hidden="true"></i> Pending Approvals
                </button>
                <button class="tab-btn" role="tab" aria-selected="false" aria-controls="all-tab" onclick="switchTab('all', this)">
                    <i class="fas fa-list" aria-hidden="true"></i> All Listings
                </button>
                <button class="tab-btn" role="tab" aria-selected="false" aria-controls="featured-tab" onclick="switchTab('featured', this)">
                    <i class="fas fa-star" aria-hidden="true"></i> Featured Slots
                </button>
                <button class="tab-btn" role="tab" aria-selected="false" aria-controls="reviews-tab" onclick="switchTab('reviews', this)">
                    <i class="fas fa-star-half-alt" aria-hidden="true"></i> Review Moderation
                    <span class="pending-badge" aria-label="12 pending reviews">12</span>
                </button>
            </div>

            <!-- ═══ PENDING APPROVALS TAB ═══════════════════════ -->
            <div id="pending-tab" class="tab-pane active" role="tabpanel">
                <p class="section-heading">
                    <i class="fas fa-hourglass-half" aria-hidden="true"></i>
                    Pending Approval (8) — click name to view full details
                </p>

                <!-- Provider 1 -->
                <div class="provider-row" id="pending1">
                    <div class="provider-info" onclick="showProfileModal('khan')" role="button" tabindex="0" aria-label="View Khan Academy SA profile">
                        <span class="avatar-small" aria-hidden="true">KM</span>
                        <div>
                            <div class="provider-name-row">
                                <strong>Khan Academy SA</strong>
                                <span class="provider-cat">(curriculum provider)</span>
                                <span class="pending-badge">pending</span>
                            </div>
                            <p class="missing-hint"><i class="fas fa-triangle-exclamation" aria-hidden="true"></i> Missing: service area, languages</p>
                        </div>
                    </div>
                    <div class="provider-actions">
                        <select class="status-select" onchange="handleStatusChange(this, 'pending1')" aria-label="Change status for Khan Academy SA">
                            <option value="pending" selected>Pending</option>
                            <option value="approved">Approve</option>
                            <option value="rejected">Reject</option>
                        </select>
                        <label class="override-toggle">
                            <input type="checkbox" onchange="toggleOverride('pending1')" aria-label="Override for Khan Academy SA">
                            <i class="fas fa-gavel" aria-hidden="true"></i> Override
                        </label>
                        <div class="badge-selector" aria-label="Assign badge">
                            <span class="badge-option community" onclick="selectBadge('pending1', 'community')" role="button" tabindex="0">Community</span>
                            <span class="badge-option trusted" onclick="selectBadge('pending1', 'trusted')" role="button" tabindex="0">Trusted</span>
                            <span class="badge-option featured" onclick="selectBadge('pending1', 'featured')" role="button" tabindex="0">Featured</span>
                        </div>
                    </div>
                </div>

                <!-- Provider 2 -->
                <div class="provider-row" id="pending2">
                    <div class="provider-info" onclick="showProfileModal('therapy')" role="button" tabindex="0" aria-label="View Therapy4Learning profile">
                        <span class="avatar-small" aria-hidden="true">TL</span>
                        <div>
                            <div class="provider-name-row">
                                <strong>Therapy4Learning</strong>
                                <span class="provider-cat">(therapist)</span>
                                <span class="pending-badge">pending</span>
                            </div>
                            <p class="missing-hint"><i class="fas fa-triangle-exclamation" aria-hidden="true"></i> Missing: qualifications, bio</p>
                        </div>
                    </div>
                    <div class="provider-actions">
                        <select class="status-select" onchange="handleStatusChange(this, 'pending2')" aria-label="Change status for Therapy4Learning">
                            <option value="pending" selected>Pending</option>
                            <option value="approved">Approve</option>
                            <option value="rejected">Reject</option>
                        </select>
                        <label class="override-toggle">
                            <input type="checkbox" onchange="toggleOverride('pending2')" aria-label="Override for Therapy4Learning">
                            <i class="fas fa-gavel" aria-hidden="true"></i> Override
                        </label>
                        <div class="badge-selector" aria-label="Assign badge">
                            <span class="badge-option community" onclick="selectBadge('pending2', 'community')" role="button" tabindex="0">Community</span>
                            <span class="badge-option trusted" onclick="selectBadge('pending2', 'trusted')" role="button" tabindex="0">Trusted</span>
                            <span class="badge-option featured" onclick="selectBadge('pending2', 'featured')" role="button" tabindex="0">Featured</span>
                        </div>
                    </div>
                </div>

                <!-- Provider 3 -->
                <div class="provider-row" id="pending3">
                    <div class="provider-info" onclick="showProfileModal('creative')" role="button" tabindex="0" aria-label="View Creative Arts Studio profile">
                        <span class="avatar-small" aria-hidden="true">CA</span>
                        <div>
                            <div class="provider-name-row">
                                <strong>Creative Arts Studio</strong>
                                <span class="provider-cat">(extracurricular)</span>
                                <span class="pending-badge">pending</span>
                            </div>
                            <p class="missing-hint"><i class="fas fa-triangle-exclamation" aria-hidden="true"></i> Missing: availability, pricing</p>
                        </div>
                    </div>
                    <div class="provider-actions">
                        <select class="status-select" onchange="handleStatusChange(this, 'pending3')" aria-label="Change status for Creative Arts Studio">
                            <option value="pending" selected>Pending</option>
                            <option value="approved">Approve</option>
                            <option value="rejected">Reject</option>
                        </select>
                        <label class="override-toggle">
                            <input type="checkbox" onchange="toggleOverride('pending3')" aria-label="Override for Creative Arts Studio">
                            <i class="fas fa-gavel" aria-hidden="true"></i> Override
                        </label>
                        <div class="badge-selector" aria-label="Assign badge">
                            <span class="badge-option community" onclick="selectBadge('pending3', 'community')" role="button" tabindex="0">Community</span>
                            <span class="badge-option trusted" onclick="selectBadge('pending3', 'trusted')" role="button" tabindex="0">Trusted</span>
                            <span class="badge-option featured" onclick="selectBadge('pending3', 'featured')" role="button" tabindex="0">Featured</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ═══ ALL LISTINGS TAB ═════════════════════════════ -->
            <div id="all-tab" class="tab-pane" role="tabpanel">
                <p class="section-heading">
                    <i class="fas fa-list" aria-hidden="true"></i>
                    All Providers — Promote/Demote &amp; Manage Badges
                </p>

                <!-- Bright Minds -->
                <div class="provider-row">
                    <div class="provider-info" onclick="showProfileModal('bright')" role="button" tabindex="0" aria-label="View Bright Minds Tutoring profile">
                        <span class="avatar-small" aria-hidden="true">BT</span>
                        <div>
                            <div class="provider-name-row">
                                <strong>Bright Minds Tutoring</strong>
                                <span class="provider-cat">(tutor)</span>
                                <span class="approved-badge">approved</span>
                                <span class="featured-tag"><i class="fas fa-crown" aria-hidden="true"></i> featured</span>
                            </div>
                        </div>
                    </div>
                    <div class="provider-actions">
                        <div class="promote-demote-pair">
                            <button class="promote-btn" onclick="promoteListing('BT')" aria-label="Promote Bright Minds Tutoring">
                                <i class="fas fa-arrow-up" aria-hidden="true"></i> Promote
                            </button>
                            <button class="demote-btn" onclick="demoteListing('BT')" aria-label="Demote Bright Minds Tutoring">
                                <i class="fas fa-arrow-down" aria-hidden="true"></i> Demote
                            </button>
                        </div>
                        <div class="badge-selector" aria-label="Assign badge">
                            <span class="badge-option community" onclick="selectBadge('BT', 'community')" role="button" tabindex="0">Community</span>
                            <span class="badge-option trusted" onclick="selectBadge('BT', 'trusted')" role="button" tabindex="0">Trusted</span>
                            <span class="badge-option featured selected" onclick="selectBadge('BT', 'featured')" role="button" tabindex="0">Featured</span>
                        </div>
                    </div>
                </div>

                <!-- EduConsult -->
                <div class="provider-row">
                    <div class="provider-info" onclick="showProfileModal('edu')" role="button" tabindex="0" aria-label="View EduConsult Pro profile">
                        <span class="avatar-small" aria-hidden="true">EC</span>
                        <div>
                            <div class="provider-name-row">
                                <strong>EduConsult Pro</strong>
                                <span class="provider-cat">(consultant)</span>
                                <span class="approved-badge">approved</span>
                                <span class="featured-tag" style="background: #dbeafe; color: #1e3a8a;"><i class="fas fa-check-circle" aria-hidden="true"></i> trusted</span>
                            </div>
                        </div>
                    </div>
                    <div class="provider-actions">
                        <div class="promote-demote-pair">
                            <button class="promote-btn" onclick="promoteListing('EC')" aria-label="Promote EduConsult Pro">
                                <i class="fas fa-arrow-up" aria-hidden="true"></i> Promote
                            </button>
                            <button class="demote-btn" onclick="demoteListing('EC')" aria-label="Demote EduConsult Pro">
                                <i class="fas fa-arrow-down" aria-hidden="true"></i> Demote
                            </button>
                        </div>
                        <div class="badge-selector" aria-label="Assign badge">
                            <span class="badge-option community" onclick="selectBadge('EC', 'community')" role="button" tabindex="0">Community</span>
                            <span class="badge-option trusted selected" onclick="selectBadge('EC', 'trusted')" role="button" tabindex="0">Trusted</span>
                            <span class="badge-option featured" onclick="selectBadge('EC', 'featured')" role="button" tabindex="0">Featured</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ═══ FEATURED SLOTS TAB (4 global slots with 7-day rotation) ═══ -->
            <div id="featured-tab" class="tab-pane" role="tabpanel">
                <p class="section-heading">
                    <i class="fas fa-star" aria-hidden="true"></i>
                    Global Featured Slots — 4 total, rotate every 7 days
                </p>

                <div class="featured-slots" id="featuredSlotsContainer">
                    <!-- Slot 1 -->
                    <div class="slot-card" id="slot1">
                        <h4>Featured Slot #1</h4>
                        <p><span class="slot-filled">Bright Minds Tutoring</span></p>
                        <div class="slot-timer">
                            <i class="far fa-clock"></i>
                            <span>Added 2 days ago · <span class="timer-badge">5 days remaining</span></span>
                        </div>
                        <ul class="slot-list">
                            <li style="justify-content: flex-end; border-bottom: none;">
                                <button onclick="removeFeatured(1, 'Bright Minds Tutoring')">remove</button>
                                <button onclick="rotateFeatured(1)">rotate</button>
                            </li>
                        </ul>
                    </div>

                    <!-- Slot 2 -->
                    <div class="slot-card" id="slot2">
                        <h4>Featured Slot #2</h4>
                        <p><span class="slot-filled">Math Wizards</span></p>
                        <div class="slot-timer">
                            <i class="far fa-clock"></i>
                            <span>Added 5 days ago · <span class="timer-badge">2 days remaining</span></span>
                        </div>
                        <ul class="slot-list">
                            <li style="justify-content: flex-end; border-bottom: none;">
                                <button onclick="removeFeatured(2, 'Math Wizards')">remove</button>
                                <button onclick="rotateFeatured(2)">rotate</button>
                            </li>
                        </ul>
                    </div>

                    <!-- Slot 3 -->
                    <div class="slot-card" id="slot3">
                        <h4>Featured Slot #3</h4>
                        <p><span class="slot-filled">Bio Explorers</span></p>
                        <div class="slot-timer">
                            <i class="far fa-clock"></i>
                            <span>Added 1 day ago · <span class="timer-badge">6 days remaining</span></span>
                        </div>
                        <ul class="slot-list">
                            <li style="justify-content: flex-end; border-bottom: none;">
                                <button onclick="removeFeatured(3, 'Bio Explorers')">remove</button>
                                <button onclick="rotateFeatured(3)">rotate</button>
                            </li>
                        </ul>
                    </div>

                    <!-- Slot 4 (empty) -->
                    <div class="slot-card" id="slot4">
                        <h4>Featured Slot #4</h4>
                        <p><em style="color:var(--ink-4);">empty slot</em></p>
                        <div class="slot-timer">
                            <i class="far fa-clock"></i>
                            <span>Available</span>
                        </div>
                        <ul class="slot-list">
                            <li style="justify-content: flex-end; border-bottom: none;">
                                <button onclick="assignFeatured(4)">assign</button>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="manual-override-note">
                    <i class="fas fa-circle-info" aria-hidden="true"></i>
                    <p><strong>7‑day rotation active:</strong> Featured listings auto‑rotate after 7 days unless no new listings are available. Admin can manually rotate or assign any provider.</p>
                </div>
            </div>

            <!-- ═══ REVIEW MODERATION TAB ══════════════════════ -->
            <div id="reviews-tab" class="tab-pane" role="tabpanel">
                <p class="section-heading">
                    <i class="fas fa-star-half-alt" aria-hidden="true"></i>
                    Moderate Reviews (12 pending)
                </p>

                <!-- Review 1 -->
                <div class="review-card" id="review1">
                    <div class="review-header">
                        <span class="review-provider">Bright Minds Tutoring</span>
                        <span class="review-rating" aria-label="5 star rating">★★★★★</span>
                        <span class="review-status pending-badge">pending</span>
                    </div>
                    <p class="review-text">"My daughter has improved so much in maths! The tutor is patient and explains concepts clearly. Highly recommend!"</p>
                    <p class="review-meta">Reviewed by: Sarah J. · 2 days ago</p>
                    <div class="review-actions">
                        <button class="btn-approve" onclick="moderateReview('review1', 'approve')"><i class="fas fa-check" aria-hidden="true"></i> Approve</button>
                        <button class="btn-reject" onclick="moderateReview('review1', 'reject')"><i class="fas fa-times" aria-hidden="true"></i> Reject</button>
                    </div>
                </div>

                <!-- Review 2 -->
                <div class="review-card" id="review2">
                    <div class="review-header">
                        <span class="review-provider">Therapy4Learning</span>
                        <span class="review-rating" aria-label="4 star rating">★★★★☆</span>
                        <span class="review-status pending-badge">pending</span>
                    </div>
                    <p class="review-text">"Great occupational therapist, very good with children. The sessions are engaging and helpful. Would recommend."</p>
                    <p class="review-meta">Reviewed by: Thabo M. · 3 days ago</p>
                    <div class="review-actions">
                        <button class="btn-approve" onclick="moderateReview('review2', 'approve')"><i class="fas fa-check" aria-hidden="true"></i> Approve</button>
                        <button class="btn-reject" onclick="moderateReview('review2', 'reject')"><i class="fas fa-times" aria-hidden="true"></i> Reject</button>
                    </div>
                </div>

                <!-- Review 3 -->
                <div class="review-card" id="review3">
                    <div class="review-header">
                        <span class="review-provider">EduConsult Pro</span>
                        <span class="review-rating" aria-label="5 star rating">★★★★★</span>
                        <span class="review-status pending-badge">pending</span>
                    </div>
                    <p class="review-text">"James helped us choose the perfect curriculum for our son. His advice was invaluable and saved us so much time."</p>
                    <p class="review-meta">Reviewed by: Linda van Wyk · 1 day ago</p>
                    <div class="review-actions">
                        <button class="btn-approve" onclick="moderateReview('review3', 'approve')"><i class="fas fa-check" aria-hidden="true"></i> Approve</button>
                        <button class="btn-reject" onclick="moderateReview('review3', 'reject')"><i class="fas fa-times" aria-hidden="true"></i> Reject</button>
                    </div>
                </div>

                <div class="info-block">
                    <i class="fas fa-circle-info" aria-hidden="true"></i>
                    <p><strong>Review Moderation:</strong> Only approved reviews appear on client profile pages. Rejected reviews are hidden from all public views.</p>
                </div>
            </div>

            <!-- Card footer -->
            <hr>
            <div class="audit-row">
                <span class="audit-chip"><i class="fas fa-clock-rotate-left" aria-hidden="true"></i> audit log</span>
                <span style="display:inline-flex; align-items:center; gap:0.375rem; font-size:0.82rem; color:var(--ink-3);">
                    <i class="fas fa-toggle-on" style="color:var(--success);" aria-hidden="true"></i>
                    manual verification override active
                </span>
            </div>
        </div>

        <!-- The signup-mini section has been removed as requested -->

    </main>

    <!-- ─── Profile Modal ──────────────────────────────────────── -->
    <div id="profileModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal()" aria-label="Close modal">&times;</button>
            <h2 id="modalTitle">Provider Profile</h2>
            <div id="modalBody"></div>
        </div>
    </div>

    <!-- Footer placeholder -->
    <div id="footer-placeholder"></div>

    <script>
        fetch('../shared/footer.html')
            .then(r => r.text())
            .then(d => document.getElementById('footer-placeholder').innerHTML = d)
            .catch(() => {});
    </script>

    <script src="../../js/dashboards.js"></script>

    <script>
        // ─── Hamburger menu ────────────────────────────────────── //
        (function () {
            const btn = document.getElementById('hamburgerBtn');
            const nav = document.getElementById('mobileNav');

            btn.addEventListener('click', function () {
                const open = nav.classList.toggle('open');
                btn.classList.toggle('open', open);
                btn.setAttribute('aria-expanded', String(open));
            });

            // Close on outside click
            document.addEventListener('click', function (e) {
                if (!btn.contains(e.target) && !nav.contains(e.target)) {
                    nav.classList.remove('open');
                    btn.classList.remove('open');
                    btn.setAttribute('aria-expanded', 'false');
                }
            });

            // Keyboard: Enter/Space on badge-option and provider-info spans
            document.querySelectorAll('[role=button]').forEach(el => {
                el.addEventListener('keydown', function (e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        el.click();
                    }
                });
            });
        })();

        // ─── Tab switching with proper ARIA ───────────────────── //
        function switchTab(tabName, clickedBtn) {
            document.querySelectorAll('.tab-pane').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => {
                b.classList.remove('active');
                b.setAttribute('aria-selected', 'false');
            });

            const pane = document.getElementById(tabName + '-tab');
            if (pane) pane.classList.add('active');
            if (clickedBtn) {
                clickedBtn.classList.add('active');
                clickedBtn.setAttribute('aria-selected', 'true');
            }
        }

        // ─── Featured slot functions ───────────────────────────── //
        window.removeFeatured = function(slotNum, provider) {
            const slot = document.getElementById(`slot${slotNum}`);
            if (!slot) return;
            
            // In a real app, you'd call an API here
            slot.querySelector('p').innerHTML = '<em style="color:var(--ink-4);">empty slot</em>';
            slot.querySelector('.slot-timer span').innerHTML = 'Available';
            
            // Replace remove/rotate buttons with assign button
            const list = slot.querySelector('.slot-list');
            list.innerHTML = '<li style="justify-content: flex-end; border-bottom: none;"><button onclick="assignFeatured(' + slotNum + ')">assign</button></li>';
            
            showNotification(`Removed ${provider} from featured slot #${slotNum}`, 'info');
        };

        window.assignFeatured = function(slotNum) {
            // In a real app, you'd open a provider picker
            // For demo, we'll assign a placeholder
            const slot = document.getElementById(`slot${slotNum}`);
            if (!slot) return;
            
            const demoProviders = ['Khan Academy SA', 'Therapy4Learning', 'Creative Arts Studio', 'EduConsult Pro'];
            const randomProvider = demoProviders[Math.floor(Math.random() * demoProviders.length)];
            
            slot.querySelector('p').innerHTML = `<span class="slot-filled">${randomProvider}</span>`;
            
            // Set timer to 7 days from now
            const daysRemaining = 7;
            const addedDate = new Date();
            const addedDaysAgo = 0;
            
            slot.querySelector('.slot-timer span').innerHTML = `Added today · <span class="timer-badge">${daysRemaining} days remaining</span>`;
            
            // Replace assign button with remove/rotate
            const list = slot.querySelector('.slot-list');
            list.innerHTML = `<li style="justify-content: flex-end; border-bottom: none;">
                <button onclick="removeFeatured(${slotNum}, '${randomProvider}')">remove</button>
                <button onclick="rotateFeatured(${slotNum})">rotate</button>
            </li>`;
            
            showNotification(`Assigned ${randomProvider} to featured slot #${slotNum}`, 'success');
        };

        window.rotateFeatured = function(slotNum) {
            // Manual rotation - in a real app, this would replace with next provider in queue
            const slot = document.getElementById(`slot${slotNum}`);
            if (!slot) return;
            
            const rotatingProviders = ['Math Wizards', 'Bio Explorers', 'Chem Lab', 'STEM Masters'];
            const newProvider = rotatingProviders[Math.floor(Math.random() * rotatingProviders.length)];
            
            slot.querySelector('p').innerHTML = `<span class="slot-filled">${newProvider}</span>`;
            
            // Reset timer to 7 days
            slot.querySelector('.slot-timer span').innerHTML = `Added today · <span class="timer-badge">7 days remaining</span>`;
            
            showNotification(`Rotated slot #${slotNum} to ${newProvider}`, 'success');
        };

        // Auto-rotation simulation (in a real app, this would be server-side)
        function checkAutoRotation() {
            // This would check if any slots are older than 7 days and rotate them if new listings exist
            // For demo, we'll just show a notification
            console.log('Auto-rotation check would happen here');
        }
        
        // Run auto-rotation check on page load (simulated)
        setTimeout(checkAutoRotation, 1000);
    </script>
</body>
</html>