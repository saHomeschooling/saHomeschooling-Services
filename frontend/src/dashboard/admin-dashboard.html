<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard · SA Homeschooling</title>
    <!-- Font Awesome 6 (free) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- shared dashboard CSS with custom palette -->
    <link rel="stylesheet" href="dashboard.css">
    <style>
        /* additional admin-specific styles */
        :root {
            --accent: #e02b58;
            --accent-2: #f472b6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }
        .admin-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            border-bottom: 2px solid #eef2f7;
            padding-bottom: 0.5rem;
        }
        .tab-btn {
            background: transparent;
            border: none;
            padding: 0.6rem 1.5rem;
            border-radius: 40px;
            font-weight: 600;
            color: #4a617c;
            cursor: pointer;
            transition: all 0.2s;
        }
        .tab-btn.active {
            background: var(--accent);
            color: white;
        }
        .tab-pane {
            display: none;
        }
        .tab-pane.active {
            display: block;
        }
        .pending-badge {
            background: var(--warning);
            color: white;
            padding: 0.2rem 0.8rem;
            border-radius: 30px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        .approved-badge {
            background: var(--success);
            color: white;
            padding: 0.2rem 0.8rem;
            border-radius: 30px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        .rejected-badge {
            background: var(--danger);
            color: white;
            padding: 0.2rem 0.8rem;
            border-radius: 30px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        .status-selector {
            display: flex;
            gap: 0.3rem;
            align-items: center;
        }
        .status-selector select {
            padding: 0.2rem 0.5rem;
            border-radius: 30px;
            border: 1px solid #cbd5e1;
            font-size: 0.8rem;
        }
        .featured-slots {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 1rem 0;
        }
        .slot-card {
            background: #f8fafc;
            border-radius: 20px;
            padding: 1rem;
            flex: 1 1 200px;
            border: 1px solid #e2e8f0;
        }
        .slot-card h4 {
            color: var(--accent);
            margin-bottom: 0.5rem;
        }
        .slot-list {
            list-style: none;
            padding: 0;
        }
        .slot-list li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.3rem 0;
            border-bottom: 1px dashed #cbd5e1;
        }
        .badge-selector {
            display: flex;
            gap: 0.3rem;
            flex-wrap: wrap;
        }
        .badge-option {
            padding: 0.2rem 0.8rem;
            border-radius: 30px;
            font-size: 0.7rem;
            font-weight: 600;
            cursor: pointer;
            border: 1px solid transparent;
        }
        .badge-option.community {
            background: #e2e8f0;
            color: #1e293b;
        }
        .badge-option.trusted {
            background: #dbeafe;
            color: #1e3a8a;
        }
        .badge-option.featured {
            background: #fef3c7;
            color: #92400e;
        }
        .badge-option.selected {
            border: 2px solid var(--accent);
        }
        .provider-actions {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            flex-wrap: wrap;
        }
        .override-toggle {
            background: #f1f5f9;
            padding: 0.2rem 0.8rem;
            border-radius: 30px;
            font-size: 0.7rem;
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
        }
        /* Clickable profile for popup */
        .clickable-profile {
            cursor: pointer;
            transition: opacity 0.2s;
        }
        .clickable-profile:hover {
            opacity: 0.7;
        }
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            overflow: auto;
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 2rem;
            border-radius: 28px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 12px 32px rgba(0,0,0,0.2);
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
        }
        .close-modal {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: sticky;
            top: 0;
        }
        .close-modal:hover {
            color: var(--accent);
        }
        .modal h2 {
            color: var(--accent);
            margin-bottom: 1.5rem;
            border-bottom: 2px dashed var(--accent-2);
            padding-bottom: 0.5rem;
        }
        .modal-field {
            margin-bottom: 1rem;
        }
        .modal-field label {
            font-weight: 700;
            color: #4c6a85;
            font-size: 0.8rem;
            text-transform: uppercase;
            display: block;
            margin-bottom: 0.2rem;
        }
        .modal-field .value {
            background: #f2f6fb;
            padding: 0.7rem 1rem;
            border-radius: 16px;
            border: 1px solid #dee8f2;
        }
        /* Review moderation styles */
        .review-card {
            background: #f8fafc;
            border-radius: 20px;
            padding: 1rem;
            margin-bottom: 1rem;
            border: 1px solid #e2e8f0;
        }
        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        .review-provider {
            font-weight: 700;
            color: var(--accent);
        }
        .review-rating {
            color: #f5b342;
        }
        .review-text {
            margin: 0.5rem 0;
            font-style: italic;
        }
        .review-actions {
            display: flex;
            gap: 0.5rem;
            justify-content: flex-end;
        }
        .review-actions button {
            padding: 0.3rem 1.2rem;
            border-radius: 30px;
            border: none;
            font-weight: 600;
            cursor: pointer;
        }
        .btn-approve {
            background: var(--success);
            color: white;
        }
        .btn-reject {
            background: var(--danger);
            color: white;
        }
        .review-status {
            font-size: 0.8rem;
            padding: 0.2rem 1rem;
            border-radius: 30px;
            background: var(--warning);
            color: white;
        }
    </style>
</head>
<body>
    <header class="top-header">
        <div class="logo-area">
            <div class="logo-short">SAH</div>
            <div class="trusted-text">
                Trusted Homeschooling Directory
                <span>SA Homeschooling</span>
            </div>
        </div>
        <div class="nav-links">
            <a href="#">Home</a>
            <a href="#">Find Providers</a>
            <a href="#">List Services</a>
            <a href="#">Join Directory</a>
            <a href="#">About</a>
            <a href="#" class="cta-nav">List Your Service</a>
        </div>
    </header>

    <div class="dash-wrapper">
        <div class="page-headline">
            <h1>Admin Control Panel</h1>
            <p>Manage listings, approvals, featured slots, provider badges, and moderate reviews</p>
        </div>

        <!-- admin dashboard card -->
        <div class="card">
            <div class="card-header">
                <i class="fas fa-shield-alt"></i>
                <h2>Directory Oversight</h2>
                <span class="badge"><i class="fas fa-lock"></i> admin</span>
            </div>

            <!-- statistics summary -->
            <div class="admin-stats">
                <div class="stat-box"><h3>28</h3><p>total providers</p></div>
                <div class="stat-box"><h3>8</h3><p>pending approval</p></div>
                <div class="stat-box"><h3>6</h3><p>featured slots</p></div>
                <div class="stat-box"><h3>12</h3><p>reviews pending</p></div>
            </div>

            <!-- admin tabs -->
            <div class="admin-tabs">
                <button class="tab-btn active" onclick="switchTab('pending')">Pending Approvals</button>
                <button class="tab-btn" onclick="switchTab('all')">All Listings</button>
                <button class="tab-btn" onclick="switchTab('featured')">Featured Slots</button>
                <button class="tab-btn" onclick="switchTab('categories')">Category Mgmt</button>
                <button class="tab-btn" onclick="switchTab('reviews')">Review Moderation <span class="pending-badge" style="margin-left:0.3rem;">12</span></button>
            </div>

            <!-- PENDING APPROVALS TAB -->
            <div id="pending-tab" class="tab-pane active">
                <p class="list-title"><i class="fas fa-hourglass-half"></i> Pending Approval (8) — click on profile to view full details</p>
                
                <div class="provider-row" id="pending1">
                    <div class="provider-info clickable-profile" onclick="showProfileModal('khan')">
                        <span class="avatar-small">KM</span>
                        <div>
                            <strong>Khan Academy SA</strong> 
                            <span class="provider-cat">(curriculum provider)</span>
                            <span class="pending-badge">pending</span>
                            <div style="font-size:0.8rem; color:#64748b;">Missing: service area, languages</div>
                        </div>
                    </div>
                    <div class="provider-actions">
                        <select class="status-select" onchange="handleStatusChange(this, 'pending1')">
                            <option value="pending" selected>Pending</option>
                            <option value="approved">Approve</option>
                            <option value="rejected">Reject</option>
                        </select>
                        <label class="override-toggle">
                            <input type="checkbox" onchange="toggleOverride('pending1')"> <i class="fas fa-gavel"></i> Override
                        </label>
                        <div class="badge-selector">
                            <span class="badge-option community" onclick="selectBadge('pending1', 'community')">Community</span>
                            <span class="badge-option trusted" onclick="selectBadge('pending1', 'trusted')">Trusted</span>
                            <span class="badge-option featured" onclick="selectBadge('pending1', 'featured')">Featured</span>
                        </div>
                    </div>
                </div>

                <div class="provider-row" id="pending2">
                    <div class="provider-info clickable-profile" onclick="showProfileModal('therapy')">
                        <span class="avatar-small">TL</span>
                        <div>
                            <strong>Therapy4Learning</strong> 
                            <span class="provider-cat">(therapist)</span>
                            <span class="pending-badge">pending</span>
                            <div style="font-size:0.8rem; color:#64748b;">Missing: qualifications, bio</div>
                        </div>
                    </div>
                    <div class="provider-actions">
                        <select class="status-select" onchange="handleStatusChange(this, 'pending2')">
                            <option value="pending" selected>Pending</option>
                            <option value="approved">Approve</option>
                            <option value="rejected">Reject</option>
                        </select>
                        <label class="override-toggle">
                            <input type="checkbox" onchange="toggleOverride('pending2')"> <i class="fas fa-gavel"></i> Override
                        </label>
                        <div class="badge-selector">
                            <span class="badge-option community" onclick="selectBadge('pending2', 'community')">Community</span>
                            <span class="badge-option trusted" onclick="selectBadge('pending2', 'trusted')">Trusted</span>
                            <span class="badge-option featured" onclick="selectBadge('pending2', 'featured')">Featured</span>
                        </div>
                    </div>
                </div>

                <div class="provider-row" id="pending3">
                    <div class="provider-info clickable-profile" onclick="showProfileModal('creative')">
                        <span class="avatar-small">CA</span>
                        <div>
                            <strong>Creative Arts Studio</strong> 
                            <span class="provider-cat">(extracurricular)</span>
                            <span class="pending-badge">pending</span>
                            <div style="font-size:0.8rem; color:#64748b;">Missing: availability, pricing</div>
                        </div>
                    </div>
                    <div class="provider-actions">
                        <select class="status-select" onchange="handleStatusChange(this, 'pending3')">
                            <option value="pending" selected>Pending</option>
                            <option value="approved">Approve</option>
                            <option value="rejected">Reject</option>
                        </select>
                        <label class="override-toggle">
                            <input type="checkbox" onchange="toggleOverride('pending3')"> <i class="fas fa-gavel"></i> Override
                        </label>
                        <div class="badge-selector">
                            <span class="badge-option community" onclick="selectBadge('pending3', 'community')">Community</span>
                            <span class="badge-option trusted" onclick="selectBadge('pending3', 'trusted')">Trusted</span>
                            <span class="badge-option featured" onclick="selectBadge('pending3', 'featured')">Featured</span>
                        </div>
                    </div>
                </div>

                <div style="margin-top:1rem; padding:1rem; background:#fff9f0; border-radius:20px;">
                    <p><i class="fas fa-info-circle"></i> <strong>Override active:</strong> Admin can approve incomplete profiles manually. Check "Override" then approve.</p>
                </div>
            </div>

            <!-- ALL LISTINGS TAB -->
            <div id="all-tab" class="tab-pane">
                <p class="list-title"><i class="fas fa-list"></i> All Providers — Promote/Demote & Manage Badges</p>
                
                <div class="provider-row">
                    <div class="provider-info clickable-profile" onclick="showProfileModal('bright')">
                        <span class="avatar-small">BT</span>
                        <div>
                            <strong>Bright Minds Tutoring</strong> 
                            <span class="provider-cat">(tutor)</span>
                            <span class="approved-badge">approved</span>
                            <span class="featured-tag"><i class="fas fa-crown"></i> featured</span>
                        </div>
                    </div>
                    <div class="provider-actions">
                        <div style="display:flex; gap:0.3rem;">
                            <button class="btn-edit" style="padding:0.2rem 1rem;" onclick="promoteListing('BT')"><i class="fas fa-arrow-up"></i> Promote</button>
                            <button class="btn-edit" style="padding:0.2rem 1rem;" onclick="demoteListing('BT')"><i class="fas fa-arrow-down"></i> Demote</button>
                        </div>
                        <div class="badge-selector">
                            <span class="badge-option community" onclick="selectBadge('BT', 'community')">Community</span>
                            <span class="badge-option trusted" onclick="selectBadge('BT', 'trusted')">Trusted</span>
                            <span class="badge-option featured selected" onclick="selectBadge('BT', 'featured')">Featured</span>
                        </div>
                    </div>
                </div>

                <div class="provider-row">
                    <div class="provider-info clickable-profile" onclick="showProfileModal('edu')">
                        <span class="avatar-small">EC</span>
                        <div>
                            <strong>EduConsult Pro</strong> 
                            <span class="provider-cat">(consultant)</span>
                            <span class="approved-badge">approved</span>
                            <span class="featured-tag"><i class="fas fa-check-circle"></i> trusted</span>
                        </div>
                    </div>
                    <div class="provider-actions">
                        <div style="display:flex; gap:0.3rem;">
                            <button class="btn-edit" style="padding:0.2rem 1rem;" onclick="promoteListing('EC')"><i class="fas fa-arrow-up"></i> Promote</button>
                            <button class="btn-edit" style="padding:0.2rem 1rem;" onclick="demoteListing('EC')"><i class="fas fa-arrow-down"></i> Demote</button>
                        </div>
                        <div class="badge-selector">
                            <span class="badge-option community" onclick="selectBadge('EC', 'community')">Community</span>
                            <span class="badge-option trusted selected" onclick="selectBadge('EC', 'trusted')">Trusted</span>
                            <span class="badge-option featured" onclick="selectBadge('EC', 'featured')">Featured</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FEATURED SLOTS TAB -->
            <div id="featured-tab" class="tab-pane">
                <p class="list-title"><i class="fas fa-star"></i> Category-Level Featured Slots</p>
                
                <div class="featured-slots">
                    <div class="slot-card">
                        <h4>Mathematics</h4>
                        <p>2/4 featured slots filled</p>
                        <ul class="slot-list">
                            <li>Bright Minds <i class="fas fa-crown" style="color:var(--warning);"></i> <button onclick="removeFeatured('math', 'Bright Minds')">remove</button></li>
                            <li>Math Wizards <i class="fas fa-crown" style="color:var(--warning);"></i> <button onclick="removeFeatured('math', 'Math Wizards')">remove</button></li>
                            <li><em>empty slot</em> <button onclick="assignFeatured('math')">assign</button></li>
                            <li><em>empty slot</em> <button onclick="assignFeatured('math')">assign</button></li>
                        </ul>
                    </div>
                    <div class="slot-card">
                        <h4>Science</h4>
                        <p>3/4 featured slots filled</p>
                        <ul class="slot-list">
                            <li>Bright Minds <i class="fas fa-crown" style="color:var(--warning);"></i> <button onclick="removeFeatured('science', 'Bright Minds')">remove</button></li>
                            <li>Bio Explorers <i class="fas fa-crown" style="color:var(--warning);"></i> <button onclick="removeFeatured('science', 'Bio Explorers')">remove</button></li>
                            <li>Chem Lab <i class="fas fa-crown" style="color:var(--warning);"></i> <button onclick="removeFeatured('science', 'Chem Lab')">remove</button></li>
                            <li><em>empty slot</em> <button onclick="assignFeatured('science')">assign</button></li>
                        </ul>
                    </div>
                    <div class="slot-card">
                        <h4>Therapy</h4>
                        <p>1/2 featured slots filled</p>
                        <ul class="slot-list">
                            <li>Therapy4Learning <i class="fas fa-crown" style="color:var(--warning);"></i> <button onclick="removeFeatured('therapy', 'Therapy4Learning')">remove</button></li>
                            <li><em>empty slot</em> <button onclick="assignFeatured('therapy')">assign</button></li>
                        </ul>
                    </div>
                </div>

                <div style="background:#f1f6fe; border-radius:20px; padding:1rem; margin-top:1rem;">
                    <p><i class="fas fa-edit"></i> <strong>Manual override active:</strong> Admin can assign any provider to featured slots regardless of plan.</p>
                </div>
            </div>

            <!-- CATEGORY MANAGEMENT TAB -->
            <div id="categories-tab" class="tab-pane">
                <p class="list-title"><i class="fas fa-tags"></i> Manage Categories & Featured Limits</p>
                
                <div style="display:grid; grid-template-columns:repeat(auto-fill, minmax(250px,1fr)); gap:1rem;">
                    <div class="slot-card">
                        <h4>Mathematics</h4>
                        <p>Featured slots: 4 max</p>
                        <p>Current: 2 filled</p>
                        <input type="number" value="4" min="1" max="10" style="width:80px; border-radius:30px; border:1px solid #cbd5e1; padding:0.3rem;">
                        <button class="btn-edit" style="margin-left:0.5rem;" onclick="updateCategoryLimit('math')">Update</button>
                    </div>
                    <div class="slot-card">
                        <h4>Science</h4>
                        <p>Featured slots: 4 max</p>
                        <p>Current: 3 filled</p>
                        <input type="number" value="4" min="1" max="10" style="width:80px; border-radius:30px; border:1px solid #cbd5e1; padding:0.3rem;">
                        <button class="btn-edit" style="margin-left:0.5rem;" onclick="updateCategoryLimit('science')">Update</button>
                    </div>
                    <div class="slot-card">
                        <h4>Therapy</h4>
                        <p>Featured slots: 2 max</p>
                        <p>Current: 1 filled</p>
                        <input type="number" value="2" min="1" max="10" style="width:80px; border-radius:30px; border:1px solid #cbd5e1; padding:0.3rem;">
                        <button class="btn-edit" style="margin-left:0.5rem;" onclick="updateCategoryLimit('therapy')">Update</button>
                    </div>
                </div>
            </div>

            <!-- REVIEW MODERATION TAB -->
            <div id="reviews-tab" class="tab-pane">
                <p class="list-title"><i class="fas fa-star-half-alt"></i> Moderate Reviews (12 pending)</p>
                
                <!-- Pending Review 1 -->
                <div class="review-card" id="review1">
                    <div class="review-header">
                        <span class="review-provider">Bright Minds Tutoring</span>
                        <span class="review-rating">★★★★★</span>
                        <span class="review-status pending-badge">pending</span>
                    </div>
                    <div class="review-text">"My daughter has improved so much in maths! The tutor is patient and explains concepts clearly. Highly recommend!"</div>
                    <div style="font-size:0.8rem; color:#64748b; margin-bottom:0.5rem;">Reviewed by: Sarah J. · 2 days ago</div>
                    <div class="review-actions">
                        <button class="btn-approve" onclick="moderateReview('review1', 'approve')"><i class="fas fa-check"></i> Approve</button>
                        <button class="btn-reject" onclick="moderateReview('review1', 'reject')"><i class="fas fa-times"></i> Reject</button>
                    </div>
                </div>

                <!-- Pending Review 2 -->
                <div class="review-card" id="review2">
                    <div class="review-header">
                        <span class="review-provider">Therapy4Learning</span>
                        <span class="review-rating">★★★★☆</span>
                        <span class="review-status pending-badge">pending</span>
                    </div>
                    <div class="review-text">"Great occupational therapist, very good with children. The sessions are engaging and helpful. Would recommend."</div>
                    <div style="font-size:0.8rem; color:#64748b; margin-bottom:0.5rem;">Reviewed by: Thabo M. · 3 days ago</div>
                    <div class="review-actions">
                        <button class="btn-approve" onclick="moderateReview('review2', 'approve')"><i class="fas fa-check"></i> Approve</button>
                        <button class="btn-reject" onclick="moderateReview('review2', 'reject')"><i class="fas fa-times"></i> Reject</button>
                    </div>
                </div>

                <!-- Pending Review 3 -->
                <div class="review-card" id="review3">
                    <div class="review-header">
                        <span class="review-provider">EduConsult Pro</span>
                        <span class="review-rating">★★★★★</span>
                        <span class="review-status pending-badge">pending</span>
                    </div>
                    <div class="review-text">"James helped us choose the perfect curriculum for our son. His advice was invaluable and saved us so much time."</div>
                    <div style="font-size:0.8rem; color:#64748b; margin-bottom:0.5rem;">Reviewed by: Linda van Wyk · 1 day ago</div>
                    <div class="review-actions">
                        <button class="btn-approve" onclick="moderateReview('review3', 'approve')"><i class="fas fa-check"></i> Approve</button>
                        <button class="btn-reject" onclick="moderateReview('review3', 'reject')"><i class="fas fa-times"></i> Reject</button>
                    </div>
                </div>

                <!-- Pending Review 4 (inappropriate content for demo) -->
                <div class="review-card" id="review4">
                    <div class="review-header">
                        <span class="review-provider">Creative Arts Studio</span>
                        <span class="review-rating">★★☆☆☆</span>
                        <span class="review-status pending-badge">pending</span>
                    </div>
                    <div class="review-text">"Very disorganized and the teacher was often late. My child didn't enjoy the classes."</div>
                    <div style="font-size:0.8rem; color:#64748b; margin-bottom:0.5rem;">Reviewed by: Peter M. · 5 days ago</div>
                    <div class="review-actions">
                        <button class="btn-approve" onclick="moderateReview('review4', 'approve')"><i class="fas fa-check"></i> Approve</button>
                        <button class="btn-reject" onclick="moderateReview('review4', 'reject')"><i class="fas fa-times"></i> Reject</button>
                    </div>
                </div>

                <div style="background:#f1f6fe; border-radius:20px; padding:1rem; margin-top:1rem;">
                    <p><i class="fas fa-info-circle"></i> <strong>Review Moderation:</strong> Only approved reviews appear on client profile pages. Rejected reviews are not shown.</p>
                </div>
            </div>

            <hr>
            <div style="display: flex; justify-content: space-between; align-items:center;">
                <span class="plan-badge" style="background: #e2eaf3; color:#1e3a5a;"><i class="fas fa-history"></i> audit log</span>
                <span><i class="fas fa-toggle-on" style="color:var(--accent);"></i> manual verification override active</span>
            </div>
        </div>

        <div class="signup-mini">
            <p><i class="fas fa-check-circle"></i> <strong>Admin capabilities:</strong> Approve/reject pending, override incomplete profiles, promote/demote listings, manage category featured slots, assign badges, and <strong>moderate reviews</strong> (approve/reject before they appear on client pages).</p>
        </div>
    </div>

    <!-- Profile Modal -->
    <div id="profileModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle">Provider Profile</h2>
            <div id="modalBody">
                <!-- Profile details will be populated here -->
            </div>
        </div>
    </div>

    <div class="footer-note">SA Homeschooling Directory · admin dashboard</div>

    <script>
        // Tab switching
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            
            // Show selected tab
            document.getElementById(tabName + '-tab').classList.add('active');
            event.target.classList.add('active');
        }

        // Handle status change (approve/reject)
        function handleStatusChange(select, rowId) {
            const status = select.value;
            const row = document.getElementById(rowId);
            const badge = row.querySelector('.pending-badge, .approved-badge, .rejected-badge');
            
            if (badge) {
                if (status === 'approved') {
                    badge.className = 'approved-badge';
                    badge.textContent = 'approved';
                } else if (status === 'rejected') {
                    badge.className = 'rejected-badge';
                    badge.textContent = 'rejected';
                } else {
                    badge.className = 'pending-badge';
                    badge.textContent = 'pending';
                }
            }
        }

        // Toggle override checkbox
        function toggleOverride(rowId) {
            const checkbox = event.target;
            const row = document.getElementById(rowId);
            if (checkbox.checked) {
                row.style.backgroundColor = '#fff3e0';
                row.style.borderLeft = '4px solid var(--accent)';
            } else {
                row.style.backgroundColor = '';
                row.style.borderLeft = '';
            }
        }

        // Select badge for provider
        function selectBadge(providerId, badgeType) {
            // Find all badge options within the same provider row
            const row = event.target.closest('.provider-row');
            const badges = row.querySelectorAll('.badge-option');
            badges.forEach(b => b.classList.remove('selected'));
            
            // Add selected class to clicked badge
            event.target.classList.add('selected');
            
            // Update any visible tag
            const providerName = row.querySelector('strong').textContent;
            console.log(`Set ${providerName} badge to ${badgeType}`);
        }

        // Promote listing
        function promoteListing(provider) {
            alert(`Promote ${provider} - listing will move up in search results (demo).`);
        }

        // Demote listing
        function demoteListing(provider) {
            alert(`Demote ${provider} - listing will move down in search results (demo).`);
        }

        // Remove from featured slot
        function removeFeatured(category, provider) {
            alert(`Remove ${provider} from ${category} featured slots (demo).`);
        }

        // Assign to featured slot
        function assignFeatured(category) {
            alert(`Assign a provider to ${category} featured slot (demo).`);
        }

        // Update category limit
        function updateCategoryLimit(category) {
            alert(`Update featured slot limit for ${category} (demo).`);
        }

        // Moderate review - approve or reject
        function moderateReview(reviewId, action) {
            const reviewCard = document.getElementById(reviewId);
            const statusBadge = reviewCard.querySelector('.review-status');
            
            if (action === 'approve') {
                statusBadge.className = 'review-status approved-badge';
                statusBadge.textContent = 'approved';
                alert('Review approved and will appear on the client page.');
            } else {
                statusBadge.className = 'review-status rejected-badge';
                statusBadge.textContent = 'rejected';
                alert('Review rejected and will not be displayed.');
            }
            
            // Disable the buttons after action
            const buttons = reviewCard.querySelectorAll('button');
            buttons.forEach(btn => btn.disabled = true);
        }

        // Modal functions
        function showProfileModal(provider) {
            const modal = document.getElementById('profileModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            
            // Set content based on provider (same as before)
            if (provider === 'khan') {
                modalTitle.textContent = 'Khan Academy SA - Profile';
                modalBody.innerHTML = `
                    <div class="modal-field"><label>Full name / Business</label><div class="value">Khan Academy SA</div></div>
                    <div class="modal-field"><label>Email address</label><div class="value">contact@khanacademy.org.za</div></div>
                    <div class="modal-field"><label>Account type</label><div class="value">Organization/Company</div></div>
                    <div class="modal-field"><label>Years of Experience</label><div class="value">10+ Years</div></div>
                    <div class="modal-field"><label>Languages spoken</label><div class="value">English, Afrikaans, isiZulu</div></div>
                    <div class="modal-field"><label>Primary category</label><div class="value">Curriculum Provider</div></div>
                    <div class="modal-field"><label>Tags</label><div class="value">mathematics, science, online learning</div></div>
                    <div class="modal-field"><label>Short bio</label><div class="value">Free world-class education for anyone anywhere. Our curriculum covers maths, science, and more.</div></div>
                    <div class="modal-field"><label>Certifications</label><div class="value">Khan Academy Certified</div></div>
                    <div class="modal-field"><label>Degrees</label><div class="value">Various</div></div>
                    <div class="modal-field"><label>Professional memberships</label><div class="value">SA Curriculum Association</div></div>
                    <div class="modal-field"><label>Background clearance</label><div class="value">Verified (2024)</div></div>
                    <div class="modal-field"><label>Service title</label><div class="value">Math & Science Curriculum (Gr R-12)</div></div>
                    <div class="modal-field"><label>Age group served</label><div class="value">5-18 years</div></div>
                    <div class="modal-field"><label>Mode of delivery</label><div class="value">Online</div></div>
                    <div class="modal-field"><label>Province / City</label><div class="value">Gauteng, Johannesburg</div></div>
                    <div class="modal-field"><label>Service area</label><div class="value">National, Online only</div></div>
                    <div class="modal-field"><label>Pricing model</label><div class="value">Free / Custom quote</div></div>
                    <div class="modal-field"><label>Starting price</label><div class="value">Free</div></div>
                    <div class="modal-field"><label>Availability</label><div class="value">24/7 Online</div></div>
                    <div class="modal-field"><label>Primary contact</label><div class="value">Support Team · +27 11 555 1234 · support@khanacademy.org.za</div></div>
                    <div class="modal-field"><label>Social links</label><div class="value">@khanacademySA · www.khanacademy.org.za</div></div>
                    <div class="modal-field"><label>Listing plan</label><div class="value">Free Listing</div></div>
                    <div class="modal-field"><label>Reviews</label><div class="value">★★★★★ "Excellent resource" · 4.9/5 (156 reviews)</div></div>
                `;
            } else if (provider === 'therapy') {
                modalTitle.textContent = 'Therapy4Learning - Profile';
                modalBody.innerHTML = `
                    <div class="modal-field"><label>Full name / Business</label><div class="value">Therapy4Learning</div></div>
                    <div class="modal-field"><label>Email address</label><div class="value">info@therapy4learning.co.za</div></div>
                    <div class="modal-field"><label>Account type</label><div class="value">Individual Provider</div></div>
                    <div class="modal-field"><label>Years of Experience</label><div class="value">5-10 Years</div></div>
                    <div class="modal-field"><label>Languages spoken</label><div class="value">English, Afrikaans</div></div>
                    <div class="modal-field"><label>Primary category</label><div class="value">Therapist</div></div>
                    <div class="modal-field"><label>Tags</label><div class="value">occupational therapy, sensory integration, child development</div></div>
                    <div class="modal-field"><label>Short bio</label><div class="value">Pediatric occupational therapy services for children with learning difficulties.</div></div>
                    <div class="modal-field"><label>Certifications</label><div class="value">HPCSA, OT Reg</div></div>
                    <div class="modal-field"><label>Degrees</label><div class="value">MSc Occupational Therapy</div></div>
                    <div class="modal-field"><label>Professional memberships</label><div class="value">OTASA</div></div>
                    <div class="modal-field"><label>Background clearance</label><div class="value">Verified (2025)</div></div>
                    <div class="modal-field"><label>Service title</label><div class="value">Pediatric OT Assessment & Therapy</div></div>
                    <div class="modal-field"><label>Age group served</label><div class="value">5-13 years</div></div>
                    <div class="modal-field"><label>Mode of delivery</label><div class="value">In Person</div></div>
                    <div class="modal-field"><label>Province / City</label><div class="value">Western Cape, Cape Town</div></div>
                    <div class="modal-field"><label>Service area</label><div class="value">Local (15km radius)</div></div>
                    <div class="modal-field"><label>Pricing model</label><div class="value">Hourly / Per package</div></div>
                    <div class="modal-field"><label>Starting price</label><div class="value">R450/hr</div></div>
                    <div class="modal-field"><label>Availability</label><div class="value">Mon-Fri 9am-5pm</div></div>
                    <div class="modal-field"><label>Primary contact</label><div class="value">Dr Sarah Khumalo · +27 21 555 9876 · drsarah@therapy4learning.co.za</div></div>
                    <div class="modal-field"><label>Social links</label><div class="value">@therapy4learning · www.therapy4learning.co.za</div></div>
                    <div class="modal-field"><label>Listing plan</label><div class="value">Professional Listing</div></div>
                `;
            } else if (provider === 'creative') {
                modalTitle.textContent = 'Creative Arts Studio - Profile';
                modalBody.innerHTML = `
                    <div class="modal-field"><label>Full name / Business</label><div class="value">Creative Arts Studio</div></div>
                    <div class="modal-field"><label>Email address</label><div class="value">hello@creativeartsstudio.co.za</div></div>
                    <div class="modal-field"><label>Account type</label><div class="value">Organization/Company</div></div>
                    <div class="modal-field"><label>Years of Experience</label><div class="value">3-5 Years</div></div>
                    <div class="modal-field"><label>Languages spoken</label><div class="value">English, Afrikaans, isiXhosa</div></div>
                    <div class="modal-field"><label>Primary category</label><div class="value">Extracurricular Activities</div></div>
                    <div class="modal-field"><label>Tags</label><div class="value">art, music, drama, creative expression</div></div>
                    <div class="modal-field"><label>Short bio</label><div class="value">After-school arts program fostering creativity through painting, music, and drama.</div></div>
                    <div class="modal-field"><label>Certifications</label><div class="value">Arts Education Certification</div></div>
                    <div class="modal-field"><label>Degrees</label><div class="value">BA Fine Arts, Dip Music</div></div>
                    <div class="modal-field"><label>Professional memberships</label><div class="value">SA Arts Education Association</div></div>
                    <div class="modal-field"><label>Background clearance</label><div class="value">Pending</div></div>
                    <div class="modal-field"><label>Service title</label><div class="value">After-school Creative Arts Program</div></div>
                    <div class="modal-field"><label>Age group served</label><div class="value">5-13 years</div></div>
                    <div class="modal-field"><label>Mode of delivery</label><div class="value">In Person</div></div>
                    <div class="modal-field"><label>Province / City</label><div class="value">Gauteng, Pretoria</div></div>
                    <div class="modal-field"><label>Service area</label><div class="value">Local (10km radius)</div></div>
                    <div class="modal-field"><label>Pricing model</label><div class="value">Per term</div></div>
                    <div class="modal-field"><label>Starting price</label><div class="value">R1200/term</div></div>
                    <div class="modal-field"><label>Availability</label><div class="value">Mon-Thu 14:00-17:00</div></div>
                    <div class="modal-field"><label>Primary contact</label><div class="value">Lisa van Wyk · +27 12 345 6789 · lisa@creativeartsstudio.co.za</div></div>
                    <div class="modal-field"><label>Social links</label><div class="value">@creativeartspta · www.creativeartsstudio.co.za</div></div>
                    <div class="modal-field"><label>Listing plan</label><div class="value">Free Listing</div></div>
                `;
            } else if (provider === 'bright') {
                modalTitle.textContent = 'Bright Minds Tutoring - Profile';
                modalBody.innerHTML = `
                    <div class="modal-field"><label>Full name / Business</label><div class="value">Bright Minds Tutoring</div></div>
                    <div class="modal-field"><label>Email address</label><div class="value">hello@brightminds.co.za</div></div>
                    <div class="modal-field"><label>Account type</label><div class="value">Organization/Company</div></div>
                    <div class="modal-field"><label>Years of Experience</label><div class="value">10+ Years</div></div>
                    <div class="modal-field"><label>Languages spoken</label><div class="value">English, Afrikaans, isiXhosa</div></div>
                    <div class="modal-field"><label>Primary category</label><div class="value">Tutor (Math & Science)</div></div>
                    <div class="modal-field"><label>Tags</label><div class="value">mathematics, tutoring, grade 8-12</div></div>
                    <div class="modal-field"><label>Short bio</label><div class="value">We offer specialised Maths & Science tutoring for grades 8–12 with a creative curriculum approach. Small groups & individual support. Based in Johannesburg but available nationwide online. Certified educators with 10+ years experience.</div></div>
                    <div class="modal-field"><label>Certifications</label><div class="value">PGCE, TEFL, Maths Specialist</div></div>
                    <div class="modal-field"><label>Degrees</label><div class="value">BSc Mathematics, MEd (Educational Psychology)</div></div>
                    <div class="modal-field"><label>Professional memberships</label><div class="value">SACE, SAALT, IEB Affiliate</div></div>
                    <div class="modal-field"><label>Background clearance</label><div class="value">Verified (2025)</div></div>
                    <div class="modal-field"><label>Service title</label><div class="value">Math & Science Mentor (Gr 8-12)</div></div>
                    <div class="modal-field"><label>Age group served</label><div class="value">14-18 years</div></div>
                    <div class="modal-field"><label>Mode of delivery</label><div class="value">Online & In-Person</div></div>
                    <div class="modal-field"><label>Province / City</label><div class="value">Gauteng, Johannesburg</div></div>
                    <div class="modal-field"><label>Service area</label><div class="value">Local (30km radius), National online</div></div>
                    <div class="modal-field"><label>Pricing model</label><div class="value">Hourly / Per package</div></div>
                    <div class="modal-field"><label>Starting price</label><div class="value">R280/hr | R1500/5 sessions</div></div>
                    <div class="modal-field"><label>Availability</label><div class="value">Mon–Fri 14:00-18:00, Sat 09:00-13:00</div></div>
                    <div class="modal-field"><label>Primary contact</label><div class="value">Maria van der Merwe · +27 82 555 1234 · maria@brightminds.co.za</div></div>
                    <div class="modal-field"><label>Social links</label><div class="value">@brightminds_tutoring · www.brightminds.co.za</div></div>
                    <div class="modal-field"><label>Listing plan</label><div class="value">Professional Listing (paid)</div></div>
                    <div class="modal-field"><label>Reviews</label><div class="value">★★★★★ "Transformed my daughter's confidence" · 4.8/5 (12 reviews)</div></div>
                `;
            } else if (provider === 'edu') {
                modalTitle.textContent = 'EduConsult Pro - Profile';
                modalBody.innerHTML = `
                    <div class="modal-field"><label>Full name / Business</label><div class="value">EduConsult Pro</div></div>
                    <div class="modal-field"><label>Email address</label><div class="value">info@educonsultpro.co.za</div></div>
                    <div class="modal-field"><label>Account type</label><div class="value">Individual Provider</div></div>
                    <div class="modal-field"><label>Years of Experience</label><div class="value">5-10 Years</div></div>
                    <div class="modal-field"><label>Languages spoken</label><div class="value">English, Afrikaans</div></div>
                    <div class="modal-field"><label>Primary category</label><div class="value">Educational Consultant</div></div>
                    <div class="modal-field"><label>Tags</label><div class="value">curriculum advice, school placement, learning support</div></div>
                    <div class="modal-field"><label>Short bio</label><div class="value">Independent educational consultancy helping families choose the right curriculum and schools.</div></div>
                    <div class="modal-field"><label>Certifications</label><div class="value">Educational Consulting Certification</div></div>
                    <div class="modal-field"><label>Degrees</label><div class="value">MEd, BEd</div></div>
                    <div class="modal-field"><label>Professional memberships</label><div class="value">SAERA, IACAC</div></div>
                    <div class="modal-field"><label>Background clearance</label><div class="value">Verified (2024)</div></div>
                    <div class="modal-field"><label>Service title</label><div class="value">Homeschool Curriculum Consulting</div></div>
                    <div class="modal-field"><label>Age group served</label><div class="value">All ages</div></div>
                    <div class="modal-field"><label>Mode of delivery</label><div class="value">Online, In Person</div></div>
                    <div class="modal-field"><label>Province / City</label><div class="value">Western Cape, Cape Town</div></div>
                    <div class="modal-field"><label>Service area</label><div class="value">National</div></div>
                    <div class="modal-field"><label>Pricing model</label><div class="value">Hourly, Per package</div></div>
                    <div class="modal-field"><label>Starting price</label><div class="value">R500/hr</div></div>
                    <div class="modal-field"><label>Availability</label><div class="value">Mon-Fri 9am-5pm, Sat by appt</div></div>
                    <div class="modal-field"><label>Primary contact</label><div class="value">Dr James Ndlovu · +27 21 555 4321 · james@educonsultpro.co.za</div></div>
                    <div class="modal-field"><label>Social links</label><div class="value">@educonsultpro · www.educonsultpro.co.za</div></div>
                    <div class="modal-field"><label>Listing plan</label><div class="value">Professional Listing</div></div>
                `;
            }
            
            modal.style.display = 'block';
        }

        function closeModal() {
            document.getElementById('profileModal').style.display = 'none';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('profileModal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }

        // Initialize
        window.onload = function() {
            // Set first tab active
            document.querySelectorAll('.tab-pane')[0].classList.add('active');
        };
    </script>
</body>
</html>