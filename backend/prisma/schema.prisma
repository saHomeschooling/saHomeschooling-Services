generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"  // Change to "sqlite" for dev if needed
  url      = env("DATABASE_URL")
}

enum Role {
  ADMIN
  PROVIDER
}

enum ProviderStatus {
  PENDING
  APPROVED
  REJECTED
}

model User {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String
  role      Role
  name      String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  providerProfile ProviderProfile?
}

model ProviderProfile {
  id                String          @id @default(uuid())
  userId            String          @unique
  user              User            @relation(fields: [userId], references: [id])
  fullName          String
  accountType       String          // e.g., 'Individual Provider', 'Organisation / Company'
  bio               String?
  experience        Int?
  languages         String[]        // Array of languages
  primaryCategory   String?
  secondaryCategories String[]      // Array
  serviceTitle      String?
  serviceDesc       String?
  subjects          String?
  ageGroups         String[]        // Array
  deliveryMode      String?
  city              String?
  province          String?
  serviceAreaType   String?         // e.g., 'national', 'local', 'online'
  radius            Int?
  pricingModel      String?
  startingPrice     String?
  availabilityDays  String[]        // Array of days
  availabilityNotes String?
  phone             String?
  whatsapp          String?
  inquiryEmail      String?
  website           String?
  facebook          String?
  twitter           String?
  instagram         String?
  linkedin          String?
  pinterest         String?
  tiktok            String?
  status            ProviderStatus  @default(PENDING)
  listingPlan       String          @default("free")  // 'free', 'pro', 'featured'
  publicDisplay     Boolean         @default(false)
  certifications    String?
  degrees           String?
  memberships       String?
  clearance         String?         // e.g., 'Verified (2025)'
  createdAt         DateTime        @default(now())
  updatedAt         DateTime        @updatedAt

  reviews           Review[]
  featuredSlots     FeaturedSlot[]
}

model Review {
  id          String   @id @default(uuid())
  providerId  String
  provider    ProviderProfile @relation(fields: [providerId], references: [id])
  reviewer    String
  rating      Int
  text        String
  status      String   @default("pending")  // 'pending', 'approved', 'rejected'
  createdAt   DateTime @default(now())
}

model FeaturedSlot {
  id          String   @id @default(uuid())
  providerId  String?
  provider    ProviderProfile? @relation(fields: [providerId], references: [id])
  addedAt     DateTime @default(now())
  expiresAt   DateTime?
}
